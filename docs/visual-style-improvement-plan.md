# ビジュアルスタイル改善プラン

## 現状の問題

1. **参考画像とガイドラインの不一致**
   - ユーザーはスタイル選択時に参考画像を見て選ぶ
   - しかし生成されるゲームがその画像の雰囲気と一致していない

2. **不要なコード**
   - `colors`配列はグラデーション表示用だったが、実際には画像が表示されている
   - フロントエンドに`colors`を使う古いコードが残っている

3. **動的生成の問題点**
   - 現在のアーキテクチャではAIが毎回ガイドラインを動的生成
   - しかし参考画像と動的生成されたガイドラインが一致する保証がない

## 改善方針

**ユーザーが参考画像を見て選択 → その画像の雰囲気に合ったゲームが生成される**

これを実現するため、各スタイルの参考画像に合わせた汎用ガイドラインを事前定義する。

## 実装タスク

### 1. stylePresets.js の再設計

各スタイルに以下を含める：
- `id`: スタイルID
- `name`: 表示名
- `imageUrl`: 参考画像のパス（既存）
- `guideline`: 参考画像に合わせた汎用ビジュアルガイドライン（新規）

ガイドラインには以下を含める：
- カラーパレット（参考画像から抽出した色）
- デザイン原則（形状、輪郭線、質感など）
- 雰囲気・トーン
- 画像生成時のキーワード

### 2. フロントエンド修正

- `colors`を使う古いコードを削除
- 画像表示のみでスタイル選択を行う（現状維持）

### 3. visualGuideGenerator.js の役割変更

現在：AIが毎回ガイドラインを動的生成
変更後：
- 汎用ガイドライン（stylePresets.jsから取得）
- ＋ ゲーム内容に合わせた適用方法をAIが補足（オプション）

または、シンプルに：
- 汎用ガイドラインをそのまま使用
- AIによる動的生成は廃止

### 4. 参考画像に合わせたガイドライン作成

各スタイル（2D: 19種類、3D: 12種類）について：
1. 参考画像を確認
2. その画像から色、雰囲気、デザイン特徴を抽出
3. ガイドラインとして文書化

## 確認事項

1. AI動的生成は残すか、完全に廃止するか？
   - 案A: 廃止（汎用ガイドラインのみ使用）
   - 案B: 汎用ガイドライン + AIによるゲーム内容への適用補足

2. 参考画像のガイドライン作成は手動で行うか、AIで生成するか？

## ファイル変更予定

- `server/stylePresets.js` - guideline追加、colors削除
- `server/visualGuideGenerator.js` - 役割変更または削除
- `server/index.js` - ガイドライン取得方法の変更
- `public/app.js` - colors使用コード削除
